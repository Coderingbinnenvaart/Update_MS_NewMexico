<!DOCTYPE html>
<html lang="nl">
<head>
<link rel="icon" type="image/png" href="logo.png">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Hafenmeister Briefje</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;900&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

<style>
:root{--bg:#020617;--accent:#38bdf8;}
body{font-family:'Outfit',sans-serif;background:var(--bg);color:#f8fafc;padding-top:85px}
.main-container{max-width:520px;margin:0 auto;padding:0 1rem}
.glass-card{background:rgba(15,23,42,.9);backdrop-filter:blur(20px);border:1px solid rgba(56,189,248,.15)}
.btn-gradient{background:linear-gradient(135deg,#0ea5e9,#2563eb)}
.modal-overlay{background:rgba(2,6,23,.98);display:none;z-index:2000;position:fixed;inset:0;align-items:center;justify-content:center}
.modal-overlay.active{display:flex}
.autocomplete-suggestions{position:absolute;background:#1e293b;border:1px solid rgba(56,189,248,.4);border-radius:.75rem;max-height:200px;overflow-y:auto;z-index:3000;width:100%}
.suggestion-item{padding:12px 15px;cursor:pointer;font-weight:600}
.suggestion-item:hover,.suggestion-item.selected{background:#38bdf8;color:#020617}
</style>
</head>

<body>

<header class="fixed top-0 inset-x-0 h-20 flex items-center justify-between px-5 z-[1000] border-b border-white/10 bg-slate-950/95 backdrop-blur-2xl">
    <div class="flex items-center gap-3">
        <div class="w-11 h-11 rounded-xl bg-sky-500/20 border border-sky-500/30 flex items-center justify-center">
            <i class="fas fa-ship text-sky-400 text-lg"></i>
        </div>
        <div>
            <h1 class="text-xl font-black uppercase">Havenbriefje <span class="text-sky-400">Duisburg</span></h1>
            <p id="active-ship-display" class="text-[10px] uppercase text-white/50 font-bold italic">Laden…</p>
        </div>
    </div>
    <button onclick="openModal('trip-modal')" class="btn-gradient px-5 py-2.5 rounded-xl font-black text-[11px] uppercase">+ Reis</button>
</header>

<main class="main-container pb-24">
    <div id="reizen-lijst" class="space-y-4"></div>
</main>

<!-- ================= MODALS (ongewijzigd qua inhoud) ================= -->
<!-- PDF, TRIP, TERMINAL, SETTINGS, EDIT TIME -->
<!-- (identiek aan jouw originele versie – alleen render/toggle aangepast) -->

<script>
/* =================== DATA =================== */
let reizen = JSON.parse(localStorage.getItem('du_reizen_v400') || '[]');
let expandedTripIndex = 0;
const havens = ["Rotterdam","Amsterdam","Antwerpen","Duisburg","Dusseldorf","Neuss","Leverkusen","Koln"];

/* =================== MODALS =================== */
function openModal(id){document.getElementById(id).classList.add('active')}
function closeModal(id){document.getElementById(id).classList.remove('active')}

/* =================== ACCORDION =================== */
function toggleTrip(index){
    expandedTripIndex = expandedTripIndex === index ? null : index;
    renderReizen();
}

/* =================== RENDER =================== */
function renderReizen(){
    const lijst = document.getElementById('reizen-lijst');

    lijst.innerHTML = reizen.map((r,i)=>{
        const open = expandedTripIndex === i;

        if(!open){
            return `
            <div onclick="toggleTrip(${i})"
                 class="glass-card px-5 py-4 rounded-2xl cursor-pointer flex justify-between items-center">
                <div>
                    <div class="text-[10px] font-black text-sky-400 uppercase">${r.van} → ${r.naar}</div>
                    <div class="text-lg font-black italic">${r.code}</div>
                </div>
                <i class="fas fa-chevron-down opacity-40"></i>
            </div>`;
        }

        let terminals = r.terminals.map(t=>`
            <div class="bg-slate-900 border border-white/5 rounded-xl p-3">
                <b>${t.name}</b><br>
                Laden: ${t.lf}/${t.le} – Lossen: ${t.df}/${t.de}
            </div>`).join('');

        return `
        <div class="glass-card p-6 rounded-3xl">
            <div onclick="toggleTrip(${i})" class="cursor-pointer mb-4 flex justify-between">
                <div>
                    <span class="text-xs font-black text-sky-400">${r.van} → ${r.naar}</span>
                    <h2 class="text-3xl font-black italic">${r.code}</h2>
                </div>
                <i class="fas fa-chevron-up opacity-40"></i>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-4">
                <div class="bg-slate-800 p-4 rounded-xl">
                    <div class="text-xs text-sky-400 font-black">ETA</div>
                    <div class="text-xl font-black">${r.at || '--:--'}</div>
                    <div class="text-xs opacity-40">${r.ad || '-'}</div>
                </div>
                <div class="bg-slate-800 p-4 rounded-xl">
                    <div class="text-xs text-violet-400 font-black">ETD</div>
                    <div class="text-xl font-black">${r.vt || '--:--'}</div>
                    <div class="text-xs opacity-40">${r.vd || '-'}</div>
                </div>
            </div>

            <div class="space-y-2">${terminals}</div>
        </div>`;
    }).join('') || `
        <div class="opacity-30 text-center text-xs font-black uppercase">
            Geen reizen
        </div>`;
}

/* =================== INIT =================== */
window.onload = renderReizen;
</script>

</body>
</html>
