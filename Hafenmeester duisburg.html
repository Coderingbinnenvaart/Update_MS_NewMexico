<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Havenbriefje Duisburg</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        body {
            background:#020617;
            color:#f8fafc;
            font-family: system-ui, sans-serif;
            padding-top:80px;
        }
        .glass-card {
            background: rgba(15,23,42,.9);
            border:1px solid rgba(56,189,248,.2);
            backdrop-filter: blur(16px);
        }
    </style>
</head>
<body>

<header class="fixed top-0 inset-x-0 h-20 bg-slate-950/95 backdrop-blur border-b border-white/10 flex items-center justify-between px-5 z-50">
    <h1 class="font-black uppercase tracking-tight">
        Havenbriefje <span class="text-sky-400">Duisburg</span>
    </h1>
    <button onclick="openModal('trip-modal')" class="bg-sky-500 px-4 py-2 rounded-xl font-black text-sm">
        + Reis
    </button>
</header>

<main class="max-w-xl mx-auto px-4 pb-24">
    <div id="reizen-lijst" class="space-y-4"></div>
</main>

<!-- MODAL: NIEUWE REIS -->
<div id="trip-modal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50">
    <div class="bg-slate-900 w-full max-w-sm rounded-3xl p-6">
        <h2 class="font-black text-xl mb-4 text-sky-400 uppercase">Nieuwe reis</h2>

        <input id="c-reiscode" placeholder="Reiscode"
               class="w-full mb-3 p-3 rounded-xl bg-slate-800 font-black">
        <input id="c-van" placeholder="Van"
               class="w-full mb-3 p-3 rounded-xl bg-slate-800 font-black">
        <input id="c-naar" placeholder="Naar"
               class="w-full mb-3 p-3 rounded-xl bg-slate-800 font-black">

        <div class="grid grid-cols-2 gap-3 mb-4">
            <input type="date" id="c-a-datum" class="p-3 rounded-xl bg-slate-800">
            <input type="time" id="c-a-tijd" class="p-3 rounded-xl bg-slate-800">
            <input type="date" id="c-v-datum" class="p-3 rounded-xl bg-slate-800">
            <input type="time" id="c-v-tijd" class="p-3 rounded-xl bg-slate-800">
        </div>

        <div class="flex gap-3">
            <button onclick="closeModal('trip-modal')" class="flex-1 opacity-40">Terug</button>
            <button onclick="saveTrip()" class="flex-1 bg-sky-500 rounded-xl py-3 font-black">
                Opslaan
            </button>
        </div>
    </div>
</div>

<script>
/* ===================== DATA ===================== */
let reizen = JSON.parse(localStorage.getItem('du_reizen_v401') || '[]');
let expandedTripIndex = 0;

/* ===================== MODALS ===================== */
function openModal(id){ document.getElementById(id).classList.remove('hidden'); }
function closeModal(id){ document.getElementById(id).classList.add('hidden'); }

/* ===================== OPSLAAN ===================== */
function saveTrip(){
    const r = {
        code: document.getElementById('c-reiscode').value || 'D-' + Date.now().toString().slice(-4),
        van: document.getElementById('c-van').value || '?',
        naar: document.getElementById('c-naar').value || '?',
        ad: document.getElementById('c-a-datum').value,
        at: document.getElementById('c-a-tijd').value,
        vd: document.getElementById('c-v-datum').value,
        vt: document.getElementById('c-v-tijd').value
    };

    reizen.unshift(r);
    expandedTripIndex = 0;

    localStorage.setItem('du_reizen_v401', JSON.stringify(reizen));
    closeModal('trip-modal');
    renderReizen();
}

/* ===================== TOGGLE ===================== */
function toggleTrip(index){
    expandedTripIndex = expandedTripIndex === index ? null : index;
    renderReizen();
}

/* ===================== RENDER ===================== */
function renderReizen(){
    const lijst = document.getElementById('reizen-lijst');

    lijst.innerHTML = reizen.map((r,i)=>{
        const open = expandedTripIndex === i;

        if(!open){
            return `
            <div onclick="toggleTrip(${i})"
                 class="glass-card px-5 py-4 rounded-2xl cursor-pointer flex justify-between items-center">
                <div>
                    <div class="text-xs text-sky-400 font-black">${r.van} → ${r.naar}</div>
                    <div class="text-lg font-black italic">${r.code}</div>
                </div>
                <i class="fas fa-chevron-down opacity-40"></i>
            </div>`;
        }

        return `
        <div class="glass-card p-6 rounded-3xl">
            <div onclick="toggleTrip(${i})" class="cursor-pointer mb-4 flex justify-between">
                <div>
                    <span class="text-xs font-black text-sky-400">${r.van} → ${r.naar}</span>
                    <h2 class="text-3xl font-black italic">${r.code}</h2>
                </div>
                <i class="fas fa-chevron-up opacity-40"></i>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="bg-slate-800 p-4 rounded-2xl">
                    <div class="text-xs text-sky-400 font-black">ETA</div>
                    <div class="text-xl font-black">${r.at || '--:--'}</div>
                    <div class="text-xs opacity-40">${r.ad || '-'}</div>
                </div>
                <div class="bg-slate-800 p-4 rounded-2xl">
                    <div class="text-xs text-violet-400 font-black">ETD</div>
                    <div class="text-xl font-black">${r.vt || '--:--'}</div>
                    <div class="text-xs opacity-40">${r.vd || '-'}</div>
                </div>
            </div>
        </div>`;
    }).join('') || `
        <div class="opacity-30 text-center text-sm font-black uppercase">
            Geen reizen
        </div>`;
}

/* ===================== INIT ===================== */
renderReizen();
</script>

</body>
</html>
